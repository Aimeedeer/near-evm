matrix:
    include:
      - language: rust
        rust: stable
        cache:
            directories:
                - ./target
                - /home/travis/.cargo
        install:
          - cd / && apt-get update && apt-get install solc && cd $TRAVIS_BUILD_DIR
        before_script:
          - cd ../src/tests && ./build.sh solc && cd ../..
        script:
          - cargo test --lib

      - language: rust
        rust: stable
        before_install:
          - rustup target add wasm32-unknown-unknown --toolchain stable
        install:
          - cargo +stable build --target wasm32-unknown-unknown --release # ./build.sh needs target/wasm32-unknown-unknown/release/near_evm.wasm
        script:
          - ./build.sh
