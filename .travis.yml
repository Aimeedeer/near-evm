matrix:
    include:
      - language: rust
        rust: stable
        cache:
            directories:
                - ./target
                - /home/travis/.cargo
        before_install:
          - sudo apt-get update && sudo apt-get install -y libc6 && sudo apt-get install -y libstdc++6
        install:
          - sudo add-apt-repository -y ppa:ethereum/ethereum && sudo apt-get update && sudo apt-get install -y solc
        before_script:
          - cd ../src/tests && ./build.sh solc && cd ../..
        script:
          - cargo test --lib

      - language: rust
        rust: stable
        before_install:
          - rustup target add wasm32-unknown-unknown --toolchain stable
        install:
          - cargo +stable build --target wasm32-unknown-unknown --release # ./build.sh needs target/wasm32-unknown-unknown/release/near_evm.wasm
        script:
          - ./build.sh
